<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANFA Vardiya Takip</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
--bg-primary:#0f172a;
--bg-secondary:#1e293b;
--bg-tertiary:#334155;
--color-primary:#38bdf8;
--color-success:#10b981;
--color-warning:#fbbf24;
--color-text:#e2e8f0;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',system-ui,sans-serif}
body{background:var(--bg-primary);color:var(--color-text);min-height:100vh;padding:15px;max-width:500px;margin:auto}

.header{
background:linear-gradient(135deg,var(--bg-secondary),var(--bg-tertiary));
padding:20px;border-radius:20px;text-align:center;margin-bottom:20px
}
.logo-container{display:flex;justify-content:center;gap:12px;margin-bottom:10px}
.logo-icon{font-size:2.2rem;color:var(--color-primary)}
.logo-text{font-size:1.8rem;font-weight:800;color:var(--color-primary)}
#time{font-size:2.7rem;color:var(--color-primary);margin:5px 0}
#date{font-size:.95rem}
#todayShift{margin-top:8px;font-size:.9rem;color:#fbbf24}

.section{background:var(--bg-secondary);padding:20px;border-radius:20px;margin-bottom:20px}
.section-title{color:var(--color-primary);font-size:1.3rem;margin-bottom:15px}

.vardiya-buttons{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.vardiya-btn{
background:var(--bg-primary);
border:2px solid var(--bg-tertiary);
border-radius:15px;padding:15px;color:white;cursor:pointer
}
.vardiya-btn.active{border-color:var(--color-success)}

.weekdays{
display:grid;grid-template-columns:repeat(7,1fr);
font-size:.75rem;text-align:center;margin-bottom:6px;color:#94a3b8
}

.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.day{
background:var(--bg-tertiary);
border-radius:10px;
padding:8px;
font-size:.85rem;
text-align:center;
position:relative
}
.work-day{background:rgba(16,185,129,.4)}
.work-night{background:rgba(56,189,248,.4)}
.off{background:rgba(100,116,139,.4)}
.holiday{outline:2px solid #fbbf24}
.today{outline:2px solid #38bdf8;box-shadow:0 0 10px #38bdf8}

.summary{display:flex;justify-content:space-between;margin-top:15px}
.summary-value{font-size:1.6rem;font-weight:800}

.holiday-box{
display:none;
margin-top:15px;
background:#1e293b;
border-left:4px solid #fbbf24;
padding:10px;
border-radius:10px;
font-size:.9rem
}

.settings-btn{
position:fixed;top:20px;right:20px;
font-size:1.6rem;color:var(--color-primary);cursor:pointer
}

.settings-panel{
display:none;
position:fixed;
top:70px;right:20px;
background:#1e293b;
border-radius:15px;
padding:15px;
width:260px;
z-index:10
}
.settings-panel textarea{
width:100%;height:80px;
border-radius:10px;
border:none;padding:8px
}
.settings-panel button{
margin-top:8px;width:100%;
border:none;border-radius:10px;
padding:8px;
background:#38bdf8;color:#0f172a;font-weight:700
}

/* ALT AÃ‡ILIR KART */
.bottom-card{
background:#1e293b;
border-radius:20px;
padding:15px;
margin-top:20px;
}
.bottom-title{
display:flex;
justify-content:space-between;
cursor:pointer;
color:#38bdf8;
font-weight:700;
}
.bottom-content{display:none;margin-top:10px}
</style>
</head>

<body>

<div class="settings-btn" onclick="toggleSettings()">
<i class="fas fa-cog"></i>
</div>

<div class="settings-panel" id="settings">
<b>ðŸ“© Geri Bildirim</b><br><br>
<textarea id="feedbackText" placeholder="GÃ¶rÃ¼ÅŸ ve Ã¶nerileriniz..."></textarea>
<button onclick="sendFeedback()">GÃ¶nder</button>
<small>Mail: yasindemirkan83@gmail.com</small>
</div>

<div class="header">
<div class="logo-container">
<div class="logo-icon"><i class="fas fa-shield-alt"></i></div>
<div class="logo-text">ANFA GÃœVENLÄ°K</div>
</div>
<div id="date"></div>
<div id="time"></div>
<div id="todayShift"></div>
</div>

<div class="section">
<div class="section-title">Vardiya SeÃ§imi</div>
<div class="vardiya-buttons">
<button class="vardiya-btn" data-v="1">1. Vardiya</button>
<button class="vardiya-btn" data-v="2">2. Vardiya</button>
<button class="vardiya-btn" data-v="3">3. Vardiya</button>
<button class="vardiya-btn" data-v="4">4. Vardiya</button>
</div>
</div>

<div class="section">
<div class="section-title" style="display:flex;justify-content:space-between;align-items:center">
<button onclick="prevMonth()">â—€</button>
<span id="monthTitle"></span>
<button onclick="nextMonth()">â–¶</button>
</div>

<div class="weekdays">
<div>Pzt</div><div>Sal</div><div>Ã‡ar</div><div>Per</div><div>Cum</div><div>Cts</div><div>Paz</div>
</div>

<div class="calendar-grid" id="calendar"></div>

<div class="summary">
<div><div class="summary-value" id="dayCount">0</div>GÃ¼ndÃ¼z</div>
<div><div class="summary-value" id="nightCount">0</div>Gece</div>
<div><div class="summary-value" id="offCount">0</div>Ä°zin</div>
</div>

<div class="holiday-box" id="holidayInfo"></div>
</div>

<!-- YENÄ° ALT AÃ‡ILIR KART -->
<div class="bottom-card">
<div class="bottom-title" onclick="toggleBottom()">
<span>ðŸ“Œ SeÃ§ili Vardiya</span>
<span>â–¼</span>
</div>
<div class="bottom-content" id="bottomContent">
<p>Åžu an seÃ§ili: <b id="savedShift"></b></p>
<p>Bu seÃ§im cihazda kaydedilir.</p>
</div>
</div>

<script>
const BASLANGIC=new Date(Date.UTC(2026,0,1))
let secilen=localStorage.getItem("vardiya")||1
let currentYear=new Date().getFullYear()
let currentMonth=new Date().getMonth()

const tatiller={}

function vardiya(t){
const gunFarki=Math.floor(
(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()) -
 Date.UTC(2026,0,1)) / 86400000
) % 4

const duzen=[
['gece','izin','izin','gunduz'],
['izin','izin','gunduz','gece'],
['izin','gunduz','gece','izin'],
['gunduz','gece','izin','izin']
]

return duzen[(gunFarki+4)%4]
}

function todayInfo(){
const today=new Date()
const v=vardiya(today)
let g=[],n=[]
v.forEach((x,i)=>{
if(x==='gunduz') g.push((i+1)+'. Vardiya')
if(x==='gece') n.push((i+1)+'. Vardiya')
})
todayShift.innerText=`BugÃ¼n â†’ GÃ¼ndÃ¼z: ${g.join(', ')||'-'} | Gece: ${n.join(', ')||'-'}`
}

function draw(){
calendar.innerHTML=''
let g=0,n=0,o=0
const today=new Date()
const firstDay=(new Date(currentYear,currentMonth,1).getDay()+6)%7
const days=new Date(currentYear,currentMonth+1,0).getDate()

monthTitle.innerText=new Date(currentYear,currentMonth)
.toLocaleDateString('tr-TR',{month:'long',year:'numeric'})

for(let i=0;i<firstDay;i++){
calendar.appendChild(document.createElement('div'))
}

for(let i=1;i<=days;i++){
const date=new Date(currentYear,currentMonth,i)
const v=vardiya(date)[secilen-1]
const d=document.createElement('div')
d.className='day '+(v==='gunduz'?'work-day':v==='gece'?'work-night':'off')
if(date.toDateString()===today.toDateString()) d.classList.add('today')
d.innerText=i
calendar.appendChild(d)
v==='gunduz'?g++:v==='gece'?n++:o++
}

dayCount.innerText=g
nightCount.innerText=n
offCount.innerText=o
savedShift.innerText=secilen+". Vardiya"
}

document.querySelectorAll('.vardiya-btn').forEach(b=>{
if(b.dataset.v==secilen) b.classList.add('active')
b.onclick=()=>{
document.querySelectorAll('.vardiya-btn').forEach(x=>x.classList.remove('active'))
b.classList.add('active')
secilen=b.dataset.v
localStorage.setItem("vardiya",secilen)
draw()
}
})

function nextMonth(){currentMonth++;if(currentMonth>11){currentMonth=0;currentYear++}draw()}
function prevMonth(){currentMonth--;if(currentMonth<0){currentMonth=11;currentYear--}draw()}

function tick(){
const n=new Date()
time.innerText=n.toLocaleTimeString('tr-TR')
date.innerText=n.toLocaleDateString('tr-TR',{weekday:'long',day:'numeric',month:'long',year:'numeric'})
}

function toggleSettings(){
settings.style.display=settings.style.display==='block'?'none':'block'
}

function toggleBottom(){
const c=document.getElementById("bottomContent")
c.style.display=c.style.display==="block"?"none":"block"
}

function sendFeedback(){
const msg=document.getElementById('feedbackText').value
window.location.href=
`mailto:yasindemirkan83@gmail.com?subject=ANFA Vardiya Takip Geri Bildirim&body=${encodeURIComponent(msg)}`
}

setInterval(tick,1000)
tick();draw();todayInfo()
</script>

</body>
</html>
