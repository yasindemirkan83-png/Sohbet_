<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet App</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif;}
body,html{width:100%;height:100%;overflow:hidden;background:black;color:white;}
/* SPLASH */
#splash{position:fixed;top:0;left:0;width:100%;height:100%;z-index:20;background:black;display:flex;justify-content:center;align-items:center;}
#splash video{width:100%;height:100%;object-fit:cover;}
/* LOGIN */
#login{position:fixed;top:0;left:0;width:100%;height:100%;z-index:19;background:rgba(0,0,0,0.7);display:flex;flex-direction:column;justify-content:center;align-items:center;display:none;}
#login img{width:120px;cursor:pointer;margin-top:20px;}
/* APP */
#app{position:fixed;top:0;left:0;width:100%;height:100%;display:none;}
#bgVideo{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;}

/* HEADER */
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.5);}
#settingsBtn{font-size:24px;cursor:pointer;}

/* PANELS */
.panel{background:rgba(0,0,0,0.6);margin:10px;border-radius:15px;padding:10px;overflow:auto;max-height:200px;}
#taskList li,#chatBox div{margin:5px;padding:5px;border-radius:5px;background:rgba(255,255,255,0.1);}
.icon-buttons{display:flex;justify-content:space-around;margin-top:5px;}
.icon-buttons i{cursor:pointer;font-size:1.2rem;color:#38bdf8;}

/* SETTINGS */
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);padding:20px;overflow:auto;}
#settings h2{margin-bottom:15px;}
#settings button{width:100%;padding:10px;margin:5px 0;border:none;border-radius:10px;background:#38bdf8;color:black;font-weight:700;}
#settings textarea{width:100%;height:80px;border-radius:10px;padding:10px;margin-bottom:10px;border:none;}

/* TAKVİM */
#calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;}
.day{background:#444;color:white;text-align:center;padding:8px;border-radius:5px;}
.today{background:orange;}
</style>
</head>
<body>

<!-- SPLASH VIDEO -->
<div id="splash">
<video src="acilis.mp4" autoplay muted></video>
</div>

<!-- LOGIN -->
<div id="login">
<h2>Giriş</h2>
<img src="google-symbol.png" id="googleLogin">
</div>

<!-- APP -->
<div id="app">
<video id="bgVideo" src="uygulamaici.mp4" autoplay muted loop></video>

<div id="header">
<div id="userName">Hoşgeldin</div>
<div id="settingsBtn">⚙️</div>
</div>

<!-- GÖREVLER -->
<div class="panel">
<h3>Görevler</h3>
<input type="text" id="taskInput" placeholder="Görev başlığı">
<input type="datetime-local" id="taskStart">
<input type="datetime-local" id="taskEnd">
<div class="icon-buttons">
<i class="fas fa-plus" title="Ekle" onclick="addTask()"></i>
<i class="fas fa-trash" title="Sil" onclick="deleteTask()"></i>
<i class="fas fa-edit" title="Düzenle" onclick="editTask()"></i>
<i class="fas fa-bell" title="Alarm" onclick="setAlarm()"></i>
</div>
<ul id="taskList"></ul>
</div>

<!-- MESAJLAR -->
<div class="panel">
<h3>Mesajlar</h3>
<div id="chatBox"></div>
<input type="text" id="msgInput" placeholder="Mesaj yaz">
<div class="icon-buttons">
<i class="fas fa-paper-plane" title="Gönder" onclick="sendMsg()"></i>
<i class="fas fa-image" title="Resim Ekle" onclick="addImage()"></i>
<i class="fas fa-trash" title="Sil" onclick="deleteMsg()"></i>
</div>
</div>

<!-- TAKVİM -->
<div class="panel" id="takvimPanel">
<h3>Takvim</h3>
<div id="calendar"></div>
</div>
</div>

<!-- SETTINGS -->
<div id="settings">
<h2>Ayarlar</h2>
<b>Admin Panel</b>
<div id="adminPanel"></div>
<hr>
<b>Görüş & Öneri</b>
<textarea id="feedbackText" placeholder="Mesajınızı yazın..."></textarea>
<button onclick="sendFeedback()">Gönder</button>
<button onclick="logout()">Çıkış</button>
<button onclick="closeSettings()">Geri</button>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
databaseURL: "https://studio-3972799448-609d1-default-rtdb.firebaseio.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};

const appF = initializeApp(firebaseConfig);
const auth = getAuth(appF);
const db = getDatabase(appF);
const provider = new GoogleAuthProvider();
let currentUser=null;

// SPLASH 5SN -> LOGIN
setTimeout(()=>{
document.getElementById('splash').style.display='none';
document.getElementById('login').style.display='flex';
},5000);

// LOGIN
document.getElementById('googleLogin').onclick = ()=>{ signInWithPopup(auth,provider); };

// AUTH STATE
onAuthStateChanged(auth,user=>{
if(user){
currentUser=user;
document.getElementById('login').style.display='none';
document.getElementById('app').style.display='block';
document.getElementById('userName').innerText=user.displayName||user.email.split('@')[0];
loadTasks();
loadMessages();
if(user.email==="yasindemirkan83@gmail.com"){
document.getElementById('adminPanel').innerHTML="Tüm kullanıcılar kontrol edilebilir.";
}
}
});

// LOGOUT
window.logout = ()=>{ signOut(auth); location.reload(); }

/* TASKS */
function addTask(){
let val=taskInput.value;
let start=taskStart.value;
let end=taskEnd.value;
if(!val)return;
let task={title:val,start:start,end:end,user:currentUser.email};
let newRef=push(ref(db,'tasks/'));
set(newRef,task);
taskInput.value=''; taskStart.value=''; taskEnd.value='';
}

function loadTasks(){
const tRef=ref(db,'tasks/');
onValue(tRef,snap=>{
taskList.innerHTML='';
let tasks=[];
snap.forEach(child=>{tasks.push(child.val());});
tasks.reverse().forEach(t=>{
let li=document.createElement('li');
li.innerText=`${t.title} [${t.start||'-'} - ${t.end||'-'}]`;
taskList.appendChild(li);
})
})
}

function deleteTask(){alert("Görev silme placeholder");}
function editTask(){alert("Görev düzenleme placeholder");}
function setAlarm(){alert("Alarm placeholder");}

/* MESSAGES */
function sendMsg(){
let val=msgInput.value;if(!val)return;
let msg={text:val,user:currentUser.email,time:new Date().toISOString()};
let newRef=push(ref(db,'messages/'));
set(newRef,msg);msgInput.value='';
}
function loadMessages(){
const mRef=ref(db,'messages/');
onValue(mRef,snap=>{
chatBox.innerHTML='';
snap.forEach(child=>{
let div=document.createElement('div');
div.innerText=`${child.val().user}: ${child.val().text}`;
chatBox.appendChild(div);
})
})
}
function deleteMsg(){alert("Mesaj silme placeholder");}
function addImage(){alert("Resim ekleme placeholder");}

/* SETTINGS */
settingsBtn.onclick = ()=>{document.getElementById('settings').style.display='block';document.getElementById('app').style.display='none';}
function closeSettings(){document.getElementById('settings').style.display='none';document.getElementById('app').style.display='block';}
function sendFeedback(){
let val=document.getElementById('feedbackText').value;
if(!val)return;
window.location.href=`mailto:yasindemirkan83@gmail.com?subject=Görüş&body=${encodeURIComponent(val)}`;
}
</script>

<!-- TAKVİM (31.01.2026 Cumartesi) -->
<script>
const calendar=document.getElementById('calendar');
for(let i=1;i<=31;i++){
let d=document.createElement('div');
d.innerText=i;
d.classList.add('day');
if(i===31){d.classList.add('today');}
calendar.appendChild(d);
}
</script>
</body>
</html>
