<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANFA Vardiya & Mesaj</title>
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png" type="image/png">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial, sans-serif;}
body,html{width:100%;height:100%;background:black;color:white;overflow:hidden;}
#splash,#login,#app,#settings{position:fixed;top:0;left:0;width:100%;height:100%;}
#splash video,#app video{width:100%;height:100%;object-fit:cover;}
#login{display:flex;align-items:center;justify-content:center;flex-direction:column;background:black;z-index:10;display:none;}
#login img{width:120px;cursor:pointer;margin-top:20px;}
#app{display:none;z-index:5;display:flex;flex-direction:column;}
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6);}
#settingsBtn{font-size:24px;cursor:pointer;}
#mainPanels{flex:1;display:flex;flex-direction:column;}
#tasksCard{flex:3;overflow-y:auto;}
#chatCard{flex:1;overflow-y:auto;margin-top:5px;}
.card{background:rgba(0,0,0,0.7);border-radius:12px;margin:10px;padding:15px;display:flex;flex-direction:column;}
.task-inputs input{margin:2px 0;padding:6px;border-radius:6px;border:none;}
.icon-buttons{display:flex;gap:4px;margin-top:4px;}
.icon-buttons button{flex:1;padding:6px;border:none;border-radius:6px;background:#1abc9c;color:black;cursor:pointer;}
#tasks,#chatBox{flex:1;overflow-y:auto;padding:4px;}
.task-item.selected{background:rgba(56,189,248,0.4);border-radius:6px;margin:2px;padding:4px;}
.msg-item{margin:2px;padding:4px;border-radius:6px;display:flex;justify-content:space-between;}
.msg-meta{font-size:0.7rem;color:#ccc;}
#settings{display:none;background:black;z-index:15;padding:20px;overflow-y:auto;}
.user-item{margin:2px;padding:4px;background:#222;border-radius:6px;}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <video autoplay muted loop src="açılış .mp4"></video>
</div>

<!-- LOGIN -->
<div id="login">
  <h1>Giriş Yap</h1>
  <img src="google-symbol.png" id="googleLogin" alt="Google">
</div>

<!-- APP -->
<div id="app">
  <video autoplay muted loop src="açılış .mp4" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;"></video>
  <div id="header">
    <div id="userName">Hoşgeldin</div>
    <div id="settingsBtn">⚙️</div>
  </div>

  <div id="mainPanels">
    <!-- Görev Kartı -->
    <div class="card" id="tasksCard">
      <h3>Görevler</h3>
      <div class="task-inputs">
        <input type="text" id="taskInput" placeholder="Görev adı">
        <input type="datetime-local" id="taskStart">
        <input type="datetime-local" id="taskEnd">
      </div>
      <div class="icon-buttons">
        <button onclick="addTask()">Ekle</button>
        <button onclick="deleteTask()">Sil</button>
        <button onclick="completeTask()">Tamamlandı</button>
        <button onclick="setAlarm()">Alarm Kur</button>
      </div>
      <div id="tasks"></div>
    </div>

    <!-- Mesaj Kartı -->
    <div class="card" id="chatCard">
      <h3>Mesajlar</h3>
      <div id="chatBox"></div>
      <div class="task-inputs">
        <input type="text" id="msgInput" placeholder="Mesaj yaz">
      </div>
      <div class="icon-buttons">
        <button onclick="sendMsg()">Gönder</button>
        <button onclick="deleteMsg()">Sil</button>
      </div>
    </div>
  </div>
</div>

<!-- AYARLAR ve ADMIN PANEL -->
<div id="settings">
  <h2>Ayarlar / Yönetici Paneli</h2>
  <button onclick="toggleSettings()">⬅ Geri</button>
  
  <h3>Kullanıcılar</h3>
  <div id="usersList"></div>

  <h3>Görüş & Öneri</h3>
  <textarea id="feedbackText" placeholder="Mesajınızı yazın..."></textarea>
  <button onclick="sendFeedback()">Gönder</button>

  <button onclick="logout()">Çıkış</button>
</div>

<script type="module" src="firebaseConfig.js"></script>
<script type="module" src="app.js"></script>
<script>
const splash = document.getElementById("splash");
const appDiv = document.getElementById("app");
setTimeout(()=>{splash.style.display="none";appDiv.style.display="flex";},5000);

// Ayarlar aç/kapa
document.getElementById("settingsBtn").onclick = ()=>{
    document.getElementById("settings").style.display="block";
    appDiv.style.display="none";
};
function toggleSettings(){
    document.getElementById("settings").style.display="none";
    appDiv.style.display="flex";
}

// PWA install prompt
if('serviceWorker' in navigator){navigator.serviceWorker.register('service-worker.js');}
</script>

</body>
</html>
