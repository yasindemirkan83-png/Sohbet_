<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet App</title>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* GENEL */
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif}
body,html{width:100%;height:100%;background:#000;color:#fff;overflow:hidden}

/* SPLASH */
#splash{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;background:#000;}
#splash video{width:100%;height:100%;object-fit:cover;}

/* LOGIN */
#login{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:9;background:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;}
#login img{width:120px;cursor:pointer;margin-top:20px}

/* APP */
#app{display:none;position:fixed;top:0;left:0;width:100%;height:100%;overflow:auto;}
#bgVideo{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;}

/* HEADER */
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6);}
#settingsBtn{font-size:28px;cursor:pointer}

/* CARD */
.card{margin:10px;background:rgba(0,0,0,0.6);border-radius:12px;padding:15px;}
.card h3{margin-bottom:10px;}

/* G√ñREV PANELI */
#taskList{max-height:200px;overflow-y:auto;margin-bottom:5px;}
.task-item{padding:6px;margin:5px 0;background:#111;border-radius:8px;display:flex;justify-content:space-between;align-items:center;}

/* MESAJ PANELI */
#chatBox{height:150px;overflow-y:auto;margin-bottom:5px;}
.message-item{padding:6px;margin:5px 0;background:#111;border-radius:8px;display:flex;justify-content:space-between;align-items:center;}

/* TAKVIM */
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:10px;}
.day{background:#222;padding:10px;border-radius:8px;text-align:center;position:relative;}
.today{outline:2px solid #38bdf8;box-shadow:0 0 8px #38bdf8;}
.work-day{background:rgba(16,185,129,0.4);}
.work-night{background:rgba(56,189,248,0.4);}
.off{background:rgba(100,116,139,0.4);}

/* SETTINGS */
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);padding:20px;overflow:auto;}
.settings-panel button{margin:5px 0;padding:10px;width:100%;border:none;border-radius:8px;background:#38bdf8;color:#000;font-weight:700;cursor:pointer;}
.settings-panel textarea{width:100%;height:80px;padding:5px;border-radius:8px;border:none;margin-bottom:5px;}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
<video src="https://raw.githubusercontent.com/yasindemirkan83-png/Sohbet_/main/acilis.mp4" autoplay muted></video>
</div>

<!-- LOGIN -->
<div id="login">
<h2>Giri≈ü Yap</h2>
<img src="https://raw.githubusercontent.com/yasindemirkan83-png/Sohbet_/main/google-symbol.png" id="googleLogin">
</div>

<!-- APP -->
<div id="app">
<video id="bgVideo" src="https://raw.githubusercontent.com/yasindemirkan83-png/Sohbet_/main/uygulamaici.mp4" autoplay muted loop></video>

<div id="header">
<div id="userName">Ho≈ügeldin</div>
<div id="settingsBtn">‚öôÔ∏è</div>
</div>

<!-- G√ñREV PANELI -->
<div class="card">
<h3>G√∂revler</h3>
<input type="text" id="taskInput" placeholder="G√∂rev ba≈ülƒ±ƒüƒ±">
<input type="datetime-local" id="taskStart">
<input type="datetime-local" id="taskEnd">
<div style="display:flex;gap:5px;margin-top:5px;">
<button onclick="addTask()">‚ûï</button>
<button onclick="deleteSelectedTask()">üóëÔ∏è</button>
<button onclick="markDoneTask()">‚úÖ</button>
<button onclick="setAlarmTask()">‚è∞</button>
</div>
<ul id="taskList"></ul>
</div>

<!-- MESAJ PANELI -->
<div class="card">
<h3>Mesajlar</h3>
<div id="chatBox"></div>
<input type="text" id="msgInput" placeholder="Mesaj yaz">
<div style="display:flex;gap:5px;margin-top:5px;">
<button onclick="sendMsg()">üì©</button>
<button onclick="deleteSelectedMsg()">üóëÔ∏è</button>
<button onclick="addImg()">üñºÔ∏è</button>
</div>
</div>

<!-- TAKVIM PANELI -->
<div class="card">
<h3>Takvim</h3>
<div id="calendar"></div>
</div>

<!-- SETTINGS -->
<div id="settings">
<h2>Ayarlar</h2>
<div class="settings-panel">
<button onclick="toggleSettings()">‚¨Ö Geri</button>
<button onclick="sendFeedback()">üì© G√∂r√º≈ü & √ñneri</button>
<button onclick="logout()">üö™ √áƒ±kƒ±≈ü</button>
<hr>
<b>Admin Panel</b>
<div id="adminPanel"></div>
</div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, set, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
databaseURL: "https://studio-3972799448-609d1-default-rtdb.firebaseio.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();
const db = getDatabase(app);

let currentUser = null;
const ADMIN="yasindemirkan83@gmail.com";

/* SPLASH -> LOGIN */
setTimeout(()=>{
document.getElementById("splash").style.display="none";
document.getElementById("login").style.display="flex";
},5000);

/* LOGIN */
document.getElementById("googleLogin").onclick=()=>{
signInWithPopup(auth,provider);
};

/* AUTH STATE */
onAuthStateChanged(auth,(user)=>{
if(user){
currentUser=user;
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("userName").innerText=user.displayName;
if(user.email===ADMIN) document.getElementById("adminPanel").innerHTML="<b>Admin yetkili</b>";
loadTasks();
loadMessages();
}
});

/* LOGOUT */
function logout(){signOut(auth); location.reload();}

/* SETTINGS */
const settingsBtn=document.getElementById("settingsBtn");
settingsBtn.onclick=()=>{toggleSettings();}
function toggleSettings(){let s=document.getElementById("settings"); s.style.display=s.style.display==="block"?"none":"block"}

/* TASK FUNCTIONS */
function addTask(){
const title=document.getElementById("taskInput").value;
const start=document.getElementById("taskStart").value;
const end=document.getElementById("taskEnd").value;
if(!title) return;
const tRef=push(ref(db,"tasks"));
set(tRef,{uid:currentUser.uid,title,start,end,done:false});
document.getElementById("taskInput").value="";
document.getElementById("taskStart").value="";
document.getElementById("taskEnd").value="";
}
function loadTasks(){
const tRef=ref(db,"tasks");
onValue(tRef,(snap)=>{
const ul=document.getElementById("taskList");
ul.innerHTML="";
snap.forEach(child=>{
const li=document.createElement("li");
li.className="task-item";
li.innerText=child.val().title + " ("+child.val().start+"‚Üí"+child.val().end+")";
if(child.val().done) li.style.textDecoration="line-through";
li.onclick=()=>{li.dataset.key=child.key; li.classList.toggle("selected");};
ul.prepend(li);
});
});
}
function deleteSelectedTask(){document.querySelectorAll(".task-item.selected").forEach(li=>{remove(ref(db,"tasks/"+li.dataset.key))});}
function markDoneTask(){document.querySelectorAll(".task-item.selected").forEach(li=>{update(ref(db,"tasks/"+li.dataset.key),{done:true})});}
function setAlarmTask(){let t=prompt("Dakika gir:"); if(t) setTimeout(()=>alert("Alarm!"),t*60000);}

/* MESSAGE FUNCTIONS */
function sendMsg(){
const msg=document.getElementById("msgInput").value; if(!msg) return;
push(ref(db,"messages"),{uid:currentUser.uid,name:currentUser.displayName,text:msg});
document.getElementById("msgInput").value="";
}
function loadMessages(){
const mRef=ref(db,"messages");
onValue(mRef,(snap)=>{
const box=document.getElementById("chatBox"); box.innerHTML="";
snap.forEach(child=>{
const div=document.createElement("div");
div.className="message-item"; div.innerText=child.val().name+": "+child.val().text;
box.appendChild(div);
});
});
}
function deleteSelectedMsg(){document.querySelectorAll(".message-item.selected").forEach(div=>{remove(ref(db,"messages/"+div.dataset.key))});}
function addImg(){alert("Resim ekleme modu");}

/* FEEDBACK */
function sendFeedback(){
const msg=document.getElementById("feedbackText").value;
if(!msg) return;
window.location.href=`mailto:yasindemirkan83@gmail.com?subject=Geri Bildirim&body=${encodeURIComponent(msg)}`;
}
</script>

<!-- TAKVIM -->
<script>
/* TAKVIM */
const today=new Date(2026,0,31); // 31.01.2026 Cumartesi
const calendar=document.getElementById("calendar");
function drawCalendar(){
calendar.innerHTML="";
const firstDay=(new Date(today.getFullYear(),today.getMonth(),1).getDay()+6)%7;
const daysInMonth=new Date(today.getFullYear(),today.getMonth()+1,0).getDate();
for(let i=0;i<firstDay;i++){let empty=document.createElement("div");calendar.appendChild(empty);}
for(let d=1;d<=daysInMonth;d++){
const div=document.createElement("div"); div.className="day"; div.innerText=d;
if(d===31) div.classList.add("today");
calendar.appendChild(div);
}}
drawCalendar();
</script>

</body>
</html>
