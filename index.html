<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet & Takvim App</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif}
body,html{width:100%;height:100%;background:black;color:white;overflow:hidden}
video{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:-1;}
#splash{position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:100;}
#splash video{object-fit:cover;width:100%;height:100%;}
#login{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:101;background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;flex-direction:column;}
#login img{width:120px;cursor:pointer;margin-top:20px;}
#app{display:none;width:100%;height:100%;position:relative;z-index:1;overflow:auto;}
.header{display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6);}
#settingsBtn{font-size:28px;cursor:pointer;}
.card{background:rgba(0,0,0,0.7);border-radius:12px;margin:10px;padding:15px;}
.card h3{margin-bottom:10px;}
#taskList,#chatBox{max-height:200px;overflow-y:auto;padding:5px;border-radius:10px;background:rgba(255,255,255,0.05);}
.taskItem,.msgItem{padding:6px;margin:5px 0;border-radius:8px;}
.taskItem.done{text-decoration:line-through;background:rgba(16,185,129,0.4);}
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);padding:20px;overflow:auto;z-index:200;}
.settings-panel textarea{width:100%;height:80px;border-radius:10px;padding:6px;margin-bottom:10px;}
.settings-panel button{width:100%;padding:8px;border:none;border-radius:8px;background:#38bdf8;color:black;font-weight:700;margin-bottom:8px;}
.actionButtons{display:flex;justify-content:space-around;margin-top:10px;}
.actionButtons button{flex:1;margin:0 3px;}
input,textarea,button{font-family:'Segoe UI',sans-serif;}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash"><video src="acilis.mp4" autoplay muted></video></div>

<!-- LOGIN -->
<div id="login">
<h2>Giri≈ü yapmak i√ßin tƒ±kla</h2>
<img src="google-symbol.png" id="googleLogin" title="Google ile giri≈ü">
</div>

<!-- APP -->
<div id="app">
<video src="uygulamaici.mp4" autoplay muted loop></video>
<div class="header">
<div id="userName">Ho≈ügeldin</div>
<div id="settingsBtn">‚öôÔ∏è</div>
</div>

<!-- G√∂revler -->
<div class="card">
<h3>G√∂revler</h3>
<input id="taskInput" placeholder="G√∂rev ba≈ülƒ±ƒüƒ±">
<input type="datetime-local" id="taskStart">
<input type="datetime-local" id="taskEnd">
<div class="actionButtons">
<button onclick="addTask()"><i class="fas fa-plus"></i></button>
<button onclick="deleteTask()"><i class="fas fa-trash"></i></button>
<button onclick="markDone()"><i class="fas fa-check"></i></button>
<button onclick="setAlarm()"><i class="fas fa-bell"></i></button>
</div>
<ul id="taskList"></ul>
</div>

<!-- Mesajlar -->
<div class="card">
<h3>Mesajlar</h3>
<div id="chatBox"></div>
<input id="msgInput" placeholder="Mesaj yaz">
<div class="actionButtons">
<button onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
<button onclick="deleteSelectedMsg()"><i class="fas fa-trash"></i></button>
<button onclick="addImage()"><i class="fas fa-image"></i></button>
</div>
</div>

<!-- Takvim -->
<div class="card" id="takvimCard">
<h3>Takvim</h3>
<div id="calendar"></div>
<div class="summary">
<div>G√ºnd√ºz: <span id="dayCount">0</span></div>
<div>Gece: <span id="nightCount">0</span></div>
<div>ƒ∞zin: <span id="offCount">0</span></div>
</div>
</div>

<!-- Ayarlar -->
<div id="settings" class="settings-panel">
<h2>Ayarlar</h2>
<button onclick="logout()">√áƒ±kƒ±≈ü</button>
<b>üì© Geri Bildirim</b>
<textarea id="feedbackText" placeholder="Mesajƒ±nƒ±z..."></textarea>
<button onclick="sendFeedback()">G√∂nder</button>
<b>üëë Admin Panel</b>
<div id="adminPanel"></div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
databaseURL: "https://studio-3972799448-609d1-default-rtdb.firebaseio.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
const provider = new GoogleAuthProvider();
const ADMIN="yasindemirkan83@gmail.com";

let userEmail="", userName="";

/* SPLASH -> LOGIN */
setTimeout(()=>{document.getElementById("splash").style.display="none";document.getElementById("login").style.display="flex";},5000);

/* LOGIN */
document.getElementById("googleLogin").onclick=()=>signInWithPopup(auth,provider);

/* AUTH */
onAuthStateChanged(auth,(user)=>{
if(user){
userEmail=user.email;
userName=user.displayName||user.email.split('@')[0];
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("userName").innerText=userName;
if(userEmail===ADMIN){
document.getElementById("adminPanel").innerHTML="<i>Admin yetkileri aktif</i>";
}
loadTasks();
loadMessages();
}
});

/* LOGOUT */
function logout(){signOut(auth);location.reload();}

/* G√∂revler */
function addTask(){
let val=document.getElementById("taskInput").value;
let start=document.getElementById("taskStart").value;
let end=document.getElementById("taskEnd").value;
if(!val)return;
let taskRef=push(ref(db,"tasks"));
set(taskRef,{user:userName,title:val,start,end,done:false});
document.getElementById("taskInput").value="";
}
function loadTasks(){
const list=document.getElementById("taskList");
onValue(ref(db,"tasks"),snapshot=>{
list.innerHTML="";
snapshot.forEach(s=>{
let t=s.val();
let li=document.createElement("li");
li.className="taskItem";
li.innerText=`${t.title} [${t.start||''} - ${t.end||''}]`;
if(t.done)li.classList.add("done");
list.appendChild(li);
li.onclick=()=>{s.ref.update({done:!t.done})};
});
});
}
function deleteTask(){
const list=document.getElementById("taskList");
list.innerHTML="";
set(ref(db,"tasks"),null);
}
function markDone(){
/* ƒ∞≈üaretleme click ile zaten yapƒ±lƒ±yor */
}
/* Alarm */
function setAlarm(){
let t=prompt("Dakika gir:");
if(t) setTimeout(()=>alert("Alarm!"),t*60000);
}

/* Mesaj */
function sendMsg(){
let val=document.getElementById("msgInput").value;
if(!val)return;
push(ref(db,"messages"),{user:userName,text:val});
document.getElementById("msgInput").value="";
}
function loadMessages(){
const box=document.getElementById("chatBox");
onValue(ref(db,"messages"),snapshot=>{
box.innerHTML="";
snapshot.forEach(s=>{
let m=s.val();
let div=document.createElement("div");
div.className="msgItem";
div.innerText=`${m.user}: ${m.text}`;
box.appendChild(div);
});
});
}
function deleteSelectedMsg(){
set(ref(db,"messages"),null);
}
function addImage(){alert("Resim ekleme opsiyonu yakƒ±nda!");}

/* Takvim (31 Ocak 2026 Cumartesi) */
function drawCalendar(){
const calendar=document.getElementById("calendar");
calendar.innerHTML="";
let daysInMonth=31; // Ocak
for(let i=1;i<=daysInMonth;i++){
let d=document.createElement("div");
d.className="day";
if(i===31)d.style.border="2px solid #38bdf8"; // Bug√ºn Cumartesi
d.innerText=i;
calendar.appendChild(d);
}
}
drawCalendar();

/* Ayarlar */
document.getElementById("settingsBtn").onclick=()=>{document.getElementById("settings").style.display="block";}
function sendFeedback(){
let msg=document.getElementById("feedbackText").value;
window.location.href=`mailto:yasindemirkan83@gmail.com?subject=Geri Bildirim&body=${encodeURIComponent(msg)}`;
}

</script>
</body>
</html>
