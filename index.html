<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet App</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif;}
html,body{width:100%;height:100%;background:black;color:white;overflow:hidden;}
/* SPLASH */
#splash{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;background:black;display:flex;justify-content:center;align-items:center;}
#splash video{width:100%;height:100%;object-fit:cover;}
/* LOGIN */
#login{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:9;background:black;display:flex;flex-direction:column;align-items:center;justify-content:center;}
#login img{width:120px;cursor:pointer;margin-top:20px;}
/* APP */
#app{display:none;width:100%;height:100%;position:fixed;top:0;left:0;}
#bgVideo{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;}
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6);}
#settingsBtn{font-size:28px;cursor:pointer;}
/* CARDS */
.card{margin:10px;padding:15px;border-radius:12px;background:rgba(0,0,0,0.7);overflow:auto;}
#taskList,#chatBox{max-height:200px;overflow-y:auto;margin-top:10px;}
.task-icons{display:flex;justify-content:space-around;margin-top:10px;}
.task-icons button, .chat-icons button{flex:1;margin:0 2px;padding:8px;border:none;border-radius:6px;background:#1abc9c;color:black;cursor:pointer;}
.task-icons button:hover, .chat-icons button:hover{background:#16a085;}
.chat-icons{display:flex;justify-content:space-around;margin-top:5px;}
/* SETTINGS */
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:black;padding:20px;overflow:auto;}
.btn{padding:10px;margin:5px 0;background:#1abc9c;border:none;border-radius:8px;width:100%;cursor:pointer;}
.btn:hover{background:#16a085;}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
<video src="splash.mp4" autoplay muted></video>
</div>

<!-- LOGIN -->
<div id="login">
<h2>Google ile giriÅŸ</h2>
<img src="google-symbol.png" id="googleLogin">
</div>

<!-- APP -->
<div id="app">
<video id="bgVideo" src="bg.mp4" autoplay muted loop></video>
<div id="header">
<div id="userName">HoÅŸgeldin</div>
<div id="settingsBtn">âš™ï¸</div>
</div>

<!-- GÃ¶revler -->
<div class="card">
<h3>GÃ¶revler</h3>
<input id="taskInput" placeholder="GÃ¶rev ekle">
<div class="task-icons">
<button onclick="addTask()">â• Ekle</button>
<button onclick="deleteTask()">ğŸ—‘ï¸ Sil</button>
<button onclick="editTask()">âœï¸ DÃ¼zenle</button>
<button onclick="setAlarm()">â° Alarm</button>
</div>
<ul id="taskList"></ul>
</div>

<!-- Mesajlar -->
<div class="card">
<h3>Mesajlar</h3>
<div id="chatBox"></div>
<input id="msgInput" placeholder="Mesaj yaz">
<div class="chat-icons">
<button onclick="sendMsg()">ğŸ“© GÃ¶nder</button>
<button onclick="deleteMsg()">ğŸ—‘ï¸ Sil</button>
<button onclick="sendImage()">ğŸ–¼ï¸ Resim</button>
</div>
</div>

<!-- Takvim -->
<div class="card">
<h3>Takvim</h3>
<div id="calendar"></div>
</div>

</div>

<!-- SETTINGS -->
<div id="settings">
<h2>Ayarlar</h2>
<button class="btn" onclick="backHome()">â¬… Geri</button>
<button class="btn" onclick="addAlarm()">Alarm ekle</button>
<button class="btn" onclick="sendMail()">GÃ¶rÃ¼ÅŸ & Ã–neri</button>
<button class="btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
<div id="adminPanel"></div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
databaseURL: "https://studio-3972799448-609d1-default-rtdb.firebaseio.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();
const db = getDatabase(app);

/* SPLASH -> LOGIN */
setTimeout(()=>{
document.getElementById("splash").style.display="none";
document.getElementById("login").style.display="flex";
},3000);

/* LOGIN */
document.getElementById("googleLogin").onclick=()=>{
signInWithPopup(auth,provider);
};

/* AUTH */
onAuthStateChanged(auth,(user)=>{
if(user){
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("userName").innerText=user.displayName || user.email.split('@')[0];
document.getElementById("adminPanel").innerText = (user.email=="yasindemirkan83@gmail.com") ? "ADMIN PANEL" : "";
loadTasks();
loadMessages();
}
});

/* LOGOUT */
window.logout=()=>{
signOut(auth);
location.reload();
}

/* TASK */
function addTask(){
let val=taskInput.value;
if(!val)return;
let newTask=push(ref(db,"tasks"),{task:val,user:auth.currentUser.email});
taskInput.value="";
}
function deleteTask(){
taskList.innerHTML="";
}
function editTask(){
alert("GÃ¶rev dÃ¼zenleme hazÄ±r deÄŸil");
}

/* CHAT */
function sendMsg(){
let val=msgInput.value;
if(!val)return;
push(ref(db,"messages"),{msg:val,user:auth.currentUser.email});
msgInput.value="";
}
function deleteMsg(){chatBox.innerHTML="";}
function sendImage(){alert("Resim gÃ¶nderme hazÄ±r deÄŸil");}

/* LOAD */
function loadTasks(){
const tRef=ref(db,"tasks");
onValue(tRef,(snap)=>{
taskList.innerHTML="";
snap.forEach(s=>{
let li=document.createElement("li");
li.innerText=s.val().task + " (" + s.val().user + ")";
taskList.appendChild(li);
});
});
}
function loadMessages(){
const mRef=ref(db,"messages");
onValue(mRef,(snap)=>{
chatBox.innerHTML="";
snap.forEach(s=>{
chatBox.innerHTML+=`<div>ğŸ‘¤ ${s.val().user}: ${s.val().msg}</div>`;
});
});
}

/* SETTINGS */
settingsBtn.onclick=()=>{
document.getElementById("app").style.display="none";
document.getElementById("settings").style.display="block";
}
function backHome(){
document.getElementById("settings").style.display="none";
document.getElementById("app").style.display="block";
}

/* ALARM */
function addAlarm(){let t=prompt("Dakika gir:");if(t){setTimeout(()=>alert("Alarm!"),t*60000);}}

/* MAIL */
function sendMail(){location.href="mailto:yasindemirkan83@gmail.com?subject=GÃ¶rÃ¼ÅŸ&body=MesajÄ±m:";}
</script>

</body>
</html>
