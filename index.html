<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet App PWA</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body,html{width:100%;height:100%;overflow:hidden;background:black;color:white;}
/* SPLASH */
#splash{position:fixed;top:0;left:0;width:100%;height:100%;z-index:999;background:black;}
#splash video{width:100%;height:100%;object-fit:cover;}
/* LOGIN */
#login{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:998;display:flex;align-items:center;justify-content:center;flex-direction:column;}
#login img{width:120px;cursor:pointer;margin-top:20px;}
/* APP */
#app{display:none;position:fixed;top:0;left:0;width:100%;height:100%;overflow-y:auto;}
#bgVideo{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;}
/* HEADER */
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6);}
#settingsBtn{font-size:24px;cursor:pointer}
/* CARD */
.card{margin:10px;padding:15px;border-radius:12px;background:rgba(0,0,0,0.7);}
.card h3{margin-bottom:10px;}
.card ul{list-style:none;max-height:150px;overflow-y:auto;padding:0;}
.card ul li{padding:8px;margin-bottom:5px;background:rgba(255,255,255,0.1);border-radius:6px;}
.card .actions{display:flex;justify-content:space-around;margin-top:10px;}
.card .actions button{flex:1;margin:0 3px;padding:10px;border:none;border-radius:8px;background:#1abc9c;color:black;font-weight:700;cursor:pointer;}
/* CHAT */
#chatBox{max-height:150px;overflow-y:auto;margin-bottom:5px;}
#chatBox div{margin:3px 0;padding:6px;border-radius:6px;background:rgba(255,255,255,0.1);}
#chatActions{display:flex;justify-content:space-around;}
#chatActions button{flex:1;margin:0 3px;padding:10px;border:none;border-radius:8px;background:#38bdf8;color:black;font-weight:700;cursor:pointer;}
/* SETTINGS */
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:black;padding:20px;overflow-y:auto;z-index:1000;}
#settings button{width:100%;margin:5px 0;padding:10px;border:none;border-radius:8px;background:#10b981;color:black;font-weight:700;cursor:pointer;}
#settings textarea{width:100%;height:80px;border-radius:8px;padding:8px;border:none;margin-bottom:5px;}
/* TAKVIM */
#takvimSection{margin:10px;}
#calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;}
.day{padding:10px;background:rgba(255,255,255,0.1);border-radius:6px;text-align:center;}
.today{outline:2px solid #38bdf8;box-shadow:0 0 10px #38bdf8;}
.work-day{background:rgba(16,185,129,.4);}
.work-night{background:rgba(56,189,248,.4);}
.off{background:rgba(100,116,139,.4);}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
<video src="acilis.mp4" autoplay muted></video>
</div>

<!-- LOGIN -->
<div id="login">
<img src="google-symbol.png" id="googleLogin">
</div>

<!-- APP -->
<div id="app">
<video id="bgVideo" src="uygulamaici.mp4" autoplay muted loop></video>
<div id="header">
<div id="userName">Ho≈ügeldin</div>
<div id="settingsBtn">‚öôÔ∏è</div>
</div>

<div class="card">
<h3>G√∂revler</h3>
<input id="taskInput" placeholder="G√∂rev ekle">
<div class="actions">
<button onclick="addTask()">‚ûï Ekle</button>
<button onclick="deleteTask()">üóëÔ∏è Sil</button>
<button onclick="markDone()">‚úÖ Tamamlandƒ±</button>
<button onclick="setAlarm()">‚è∞ Alarm</button>
</div>
<ul id="taskList"></ul>
</div>

<div class="card">
<h3>Mesajlar</h3>
<div id="chatBox"></div>
<input id="msgInput" placeholder="Mesaj yaz">
<div id="chatActions">
<button onclick="sendMsg()">‚úâÔ∏è G√∂nder</button>
<button onclick="addImage()">üñºÔ∏è Resim</button>
<button onclick="deleteMsg()">üóëÔ∏è Sil</button>
</div>
</div>

<div class="card" id="takvimSection">
<h3>Takvim</h3>
<div id="calendar"></div>
</div>
</div>

<!-- SETTINGS -->
<div id="settings">
<h2>Ayarlar</h2>
<button onclick="toggleSettings()">‚¨Ö Geri</button>
<button onclick="adminPanel()">üë§ Admin Paneli</button>
<textarea id="feedbackText" placeholder="G√∂r√º≈ü ve √∂nerileriniz..."></textarea>
<button onclick="sendFeedback()">üì© G√∂nder</button>
<button onclick="logout()">üö™ √áƒ±kƒ±≈ü</button>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
databaseURL: "https://studio-3972799448-609d1-default-rtdb.firebaseio.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};

const appF = initializeApp(firebaseConfig);
const auth = getAuth(appF);
const db = getDatabase(appF);
const provider = new GoogleAuthProvider();
let currentUser=null;

// SPLASH -> LOGIN
setTimeout(()=>{document.getElementById("splash").style.display="none";document.getElementById("login").style.display="flex";},5000);

// LOGIN
document.getElementById("googleLogin").onclick=()=>{
signInWithPopup(auth,provider);
};

// AUTH
onAuthStateChanged(auth,user=>{
if(user){
currentUser=user;
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("userName").innerText=user.displayName;
loadTasks();loadMessages();drawCalendar();
}
});

// LOGOUT
window.logout=()=>{
signOut(auth).then(()=>location.reload());
}

// TASKS
function addTask(){
let val=document.getElementById("taskInput").value;
if(!val) return;
const tRef=push(ref(db,'tasks/'+currentUser.uid));
set(tRef,{text:val,done:false});
document.getElementById("taskInput").value="";
}
function loadTasks(){
const tRef=ref(db,'tasks/'+currentUser.uid);
onValue(tRef,snap=>{
const list=document.getElementById("taskList");
list.innerHTML="";
snap.forEach(child=>{
const li=document.createElement("li");
li.innerText=child.val().text;
if(child.val().done) li.style.textDecoration="line-through";
list.appendChild(li);
li.onclick=()=>{
child.ref.update({done:!child.val().done});
}
});
});
}
function deleteTask(){
const tRef=ref(db,'tasks/'+currentUser.uid);
onValue(tRef,snap=>{
snap.forEach(child=>{child.ref.remove();});
});
}
function markDone(){const tRef=ref(db,'tasks/'+currentUser.uid);onValue(tRef,snap=>{snap.forEach(child=>{child.ref.update({done:true});});});}
function setAlarm(){let t=prompt("Dakika gir:");if(t){setTimeout(()=>alert("Alarm!"),t*60000);}}

// CHAT
function sendMsg(){
let val=document.getElementById("msgInput").value;
if(!val) return;
const cRef=push(ref(db,'messages'));
set(cRef,{user:currentUser.displayName,text:val});
document.getElementById("msgInput").value="";
}
function addImage(){alert("Resim ekleme telefon se√ßimi hen√ºz yok.");}
function deleteMsg(){const cRef=ref(db,'messages');onValue(cRef,snap=>{snap.forEach(child=>{child.ref.remove();});});}
function loadMessages(){const cRef=ref(db,'messages');onValue(cRef,snap=>{const box=document.getElementById("chatBox");box.innerHTML="";snap.forEach(child=>{box.innerHTML+=`<div>üë§ ${child.val().user}: ${child.val().text}</div>`;});});}

// SETTINGS
function toggleSettings(){const s=document.getElementById("settings");s.style.display=s.style.display==="block"?"none":"block";}
function adminPanel(){alert("Admin Paneli: Kullanƒ±cƒ±larƒ± kontrol et.");}
function sendFeedback(){let msg=document.getElementById("feedbackText").value;window.location.href=`mailto:yasindemirkan83@gmail.com?subject=Geri Bildirim&body=${encodeURIComponent(msg)}`;}

// TAKVIM
function drawCalendar(){
const cal=document.getElementById("calendar");
cal.innerHTML="";
let daysInMonth=31;
let startDay=6; // Cumartesi 31.01.2026
for(let i=0;i<startDay;i++){let d=document.createElement("div");cal.appendChild(d);}
for(let i=1;i<=daysInMonth;i++){
let d=document.createElement("div");d.innerText=i;
if(i===31) d.classList.add("today");
cal.appendChild(d);
}
}
</script>
</body>
</html>
