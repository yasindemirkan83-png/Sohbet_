<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sohbet App</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{box-sizing:border-box}
body,html{margin:0;padding:0;width:100%;height:100%;font-family:Arial;background:black;color:white;overflow:hidden}

/* SPLASH */
#splash{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10}
#splash video{width:100%;height:100%;object-fit:cover}

/* LOGIN */
#login{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:9;display:flex;align-items:center;justify-content:center;flex-direction:column}
#login img{width:120px;cursor:pointer;margin-top:20px}

/* APP */
#app{display:none;position:fixed;top:0;left:0;width:100%;height:100%}
#bgVideo{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}

/* HEADER */
#header{height:50px;display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(0,0,0,0.6)}
#settingsBtn{font-size:24px;cursor:pointer}

/* CARDS */
.card{margin:10px;padding:15px;border-radius:12px;background:rgba(0,0,0,0.7);overflow:auto;max-height:300px}

/* SETTINGS */
#settings{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:black;padding:20px;overflow:auto}
.btn{padding:10px;margin:5px 0;background:#1abc9c;border:none;border-radius:8px;width:100%}

/* TASK & CHAT BUTTONS */
button{cursor:pointer}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
<video src="splash.mp4" autoplay muted></video>
</div>

<!-- LOGIN -->
<div id="login">
<h2>Google ile giriş</h2>
<img src="google-symbol.png" id="googleLogin">
</div>

<!-- APP -->
<div id="app">
<video id="bgVideo" src="bg.mp4" autoplay muted loop style="display:none"></video>

<div id="header">
<div id="userName">Hoşgeldin</div>
<div id="settingsBtn">⚙️</div>
</div>

<div class="card">
<h3>Görevler</h3>
<input id="taskInput" placeholder="Görev ekle">
<input type="datetime-local" id="startTime">
<input type="datetime-local" id="endTime">
<button title="Ekle" onclick="addTask()"><i class="fa fa-plus"></i></button>
<button title="Sil" onclick="deleteTask()"><i class="fa fa-trash"></i></button>
<button title="Düzenle" onclick="editTask()"><i class="fa fa-edit"></i></button>
<button title="Alarm" onclick="addAlarm()"><i class="fa fa-bell"></i></button>
<ul id="taskList"></ul>
</div>

<div class="card">
<h3>Mesajlar</h3>
<div id="chatBox" style="height:150px;overflow:auto"></div>
<input id="msgInput" placeholder="Mesaj yaz">
<button onclick="sendMsg()"><i class="fa fa-paper-plane"></i></button>
<button onclick="sendImage()"><i class="fa fa-image"></i></button>
<button onclick="deleteSelectedMsg()"><i class="fa fa-trash"></i></button>
</div>

<div class="card">
<h3>Takvim</h3>
<div id="calendar"></div>
</div>
</div>

<!-- SETTINGS -->
<div id="settings">
<h2>Ayarlar</h2>
<button class="btn" onclick="backHome()">⬅ Geri</button>
<button class="btn" onclick="addAlarm()">Alarm ekle</button>
<button class="btn" onclick="sendMail()">Görüş & Öneri</button>
<button class="btn" onclick="logout()">Çıkış</button>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
apiKey: "AIzaSyDE5-fq9ifhtBlXTVOR1PhzD3XuVOWSVeE",
authDomain: "studio-3972799448-609d1.firebaseapp.com",
projectId: "studio-3972799448-609d1",
storageBucket: "studio-3972799448-609d1.firebasestorage.app",
messagingSenderId: "210449601127",
appId: "1:210449601127:web:b3339666a09822b40c7ac2"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// Splash -> Login
setTimeout(()=>{
document.getElementById("splash").style.display="none";
document.getElementById("login").style.display="flex";
},3000);

// Login
document.getElementById("googleLogin").onclick=()=>{
signInWithPopup(auth,provider);
};

// Auth state
onAuthStateChanged(auth,(user)=>{
if(user){
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="block";
document.getElementById("bgVideo").style.display="block";
document.getElementById("userName").innerText=user.displayName||user.email.split("@")[0];
}
});

// Logout
window.logout=()=>{
signOut(auth);
location.reload();
}
</script>

<script>
// TASKS
function addTask(){
let val=taskInput.value;
let start=start
